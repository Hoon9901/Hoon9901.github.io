{"componentChunkName":"component---src-templates-post-tsx","path":"/springboot-disord-webhook/","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/50907e1a7aae29a055e0b3e78398d8ba/533c1/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACk0lEQVQ4y21UWXLaUBDkMLHZhBDaQEJCYhGLhdgRe6CIcShXKuWUyS1ymxywM/OMMVT80aV5M3qjnp6GhG46KGgWFK0koOo2NKMMRbXoadHZgFFyYBTdC8wSo/IpEmE0wv7bET9fTnj+8YLt7oD5covX0wmr7W+sH//CrcZwvRpcv0kIUHbrMK0KipZHqFzAuUQ9CDGeLrHc7LFc7UTcG8Q4fD8iXjwjGv9BudJHxa8TqKEXwCpXbxh/MKeGkqwjlZKQ/HKPVEZBJqsgKxWQTOWQyRCyKchyAbm8TjCQUwzIhHzB/A/cNJGTVeheiOLsF5LdLe5WJ9wPn3C3fEU63FB8xN3oiHQwQV7RkVeL4rJ81UhW3s6ioUwNFTtAPnpC0qwiaTeRdtpIehHSpo9UuYV0mXL0DrPMyhokAscZmkTEzPrCkApF2mIv7KLdCjEaTjAeTdFstLDfHzDojzCdzBBP56TtFPF8TTovMIlXmC026A+n6IQDsHRCQ26oFx14tTYspwq/3qYl1OF4DTRaXdiUs92ayFmOjyrVOcfPVqcn4pLtXWlIuhR0izbnC3/pZlloopy1UtQS+bQkzqr+5ldeSianXkaWiNSlYZY0dInN190jFqstlusd2SMQo/BoUX8s4nrwcBmZ6/zR9wW9L0k05C8wu+lshcEopgsb+LUWxTNxeTieUW2NgMaP+hNx5hrH/AuTzwu5aeiQPrv9E708FyxrjQ6hjYfugHSKSPS+EL43mIg8N9IM+8MyyrUPeSmkW6P5IEbhZsyYxWYp+GO8gGY7orE7Is8kBLOz/259WDCEqCwye4yffGYbSGfPZXOUl6jONVm/0U2+MrloqBE7/ndhlu/QztBv4HzUjM/BPvwHxH0E/GxeFh4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"토이프로젝트에서 WebHook 알림 발생\"\n        title=\"토이프로젝트에서 WebHook 알림 발생\"\n        src=\"/static/50907e1a7aae29a055e0b3e78398d8ba/533c1/1.png\"\n        srcset=\"/static/50907e1a7aae29a055e0b3e78398d8ba/12f09/1.png 148w,\n/static/50907e1a7aae29a055e0b3e78398d8ba/e4a3f/1.png 295w,\n/static/50907e1a7aae29a055e0b3e78398d8ba/533c1/1.png 576w\"\n        sizes=\"(max-width: 576px) 100vw, 576px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>이 글에서는 스프링부트에서 디스코드 WebHook을 사용하여, 어떠한 이벤트 요청이 오면, 알림을 알려주는 것을 해보겠습니다.</p>\n<h1 id=\"webhook-이란\" style=\"position:relative;\"><a href=\"#webhook-%EC%9D%B4%EB%9E%80\" aria-label=\"webhook 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WebHook 이란?</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/76e565fcaf7d62dcf6f39fd3bfd471cc/e515d/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEN0lEQVQ4y1VUWW8bVRT2z+KRF9QHhIQQKA88IKGqTwgBVRcegKqlEJRISdOQNG2gpE3sNk1jp2kWp4mTZnMa43iLd4+3Gc/mGXs8dhohNPfj3Akq9OHonjlz73e27xyPKEpOtVpzFEV1NE1zOrbtdDodp21ZjvU/4TbTNJ261HDqddER6eRvRdLrrtSdXDbveEgBGUE/oagqNJKjcg1bhTLClRo28yXskL5dqiCVL6KajME+eAHjOApdb6Kp6+4bCgjZbB4e8s64dG2bnXRt1u10mE1nvaGwP1NZppstppomUw3T1U3DYHaLxGqzXKnKanTPPjlhFD2rVKrMQ6mAwNDQdBQoykJdgmSYWFjfxqUfRyGS59e9LrrdLlqqgmZVQFOswaoJ6B8Yw/SUF6dNBRbhSPSeR4iWYeDBy33cJZDJjR1cC6xicSeM3+YWMRHag0X/zd5r5J78jtT4TRQmfkJ85DqezfkR9M4gOfELZHLcbrfhKQllNCQJ3r0IfNthTBPw0Oom0vEkZp4uYXjpBeRaHUrbRvzeIHJff4TKl+9ja6QfV4amcPP2FGIPxtAQRZhmCx7KHQoBjqxs4JvZRVyaW8Jl/yoCOwcYf76OYbLrjQZkAoz8+jNeffYuYhfOIXHrGvbWN7AbmEfl0cRZg5oG3BqamobBhVWcG7iDD4cn8fFdL/omffhgbAq3NnZhUSebvVMUH44i9Mk7CH/+HpKXP0Vp9Htk+7+CMH4dmtGC0Wye1dAg5FdEj+BREi+TaYSiCawdRrG0f4hw4hgG907paEIBYmgRtdBzHK+vILmygORyAHouBZ0wmhyQRyjLCgrEuUypjHShBIGkXCiimM2hXCxBVc74qRGoochuidLFCqKpHJJ5AbJuEA+V/1LmyNFoHLOBIJ4srCG4uY9urwfinStStQqxUoZG9xSil00Ump1fxsUfhnD1xm0cRmJoUS84loe32iLJFgT4fPN47HuK58EtnFomWrIEyzRg5FMwMnF0Wme2v3sdTPkC6Dt/BX0XvsVRIgO7Y53Rpt22XPRMrgjvowDu//EYz1Y2cWqoKCViqOSyqNG4lUkXMmnX9ldLJ0ot44ur/Ri6M40ClYo3hGN5aAm4KR/FU/D6g/AG1uAnupjkjadXo/rlJBnFhgJJ1SCrOiyarIc+Py5+N4D7M35kacZVqjFvsIePTItSEagpk9N+jNzzYY2mQ+/YyJItmslj9ziLnVQGkXQOJVokLarvwkoINwYnML+4BpEc8iXhpkzRMVXVWCaTZfF4ioUPDlkslmAGLQGiE9MUhdGqYvW6xFRZYbquMyo+vVFZJHLESkXBXS6yLDOad+ap01hxlhMonbSKiOScAjwFXgougtigyCTQpqH/+pu7fGVxndu4NGiiPKS4C9T+d7Fy4fpb3+5pvfnu2J237lKqTrVSdcrlivMPpoDmjUYXQNQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/76e565fcaf7d62dcf6f39fd3bfd471cc/fcda8/2.png\"\n        srcset=\"/static/76e565fcaf7d62dcf6f39fd3bfd471cc/12f09/2.png 148w,\n/static/76e565fcaf7d62dcf6f39fd3bfd471cc/e4a3f/2.png 295w,\n/static/76e565fcaf7d62dcf6f39fd3bfd471cc/fcda8/2.png 590w,\n/static/76e565fcaf7d62dcf6f39fd3bfd471cc/efc66/2.png 885w,\n/static/76e565fcaf7d62dcf6f39fd3bfd471cc/c83ae/2.png 1180w,\n/static/76e565fcaf7d62dcf6f39fd3bfd471cc/e515d/2.png 1430w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>WebHook은 웹페이지 또는 웹앱에서 발생하는 특정 행동(이벤트)들을 커스텀 Callback 형식으로 반환해주는 방법입니다.</p>\n<p>일반적인 API(Polling)는 클라이언트가 서버를 호출하는 방식인데, WebHook의 경우 서버에서 특정 이벤트가 발생했을 때 클라이언트를 호출하는 방식이며 역방향 API라고도 부르기합니다.</p>\n<p>따라서 서버에서 이벤트가 발생했을 때 클라이언트의 어느 URL로 데이터를 보내는 것을 (Callback URL) 구현하는 것을 생각하신다면 WebHook을 사용하시면 좋을 것 같습니다.</p>\n<h1 id=\"디스코드-채널-webhook-설정\" style=\"position:relative;\"><a href=\"#%EB%94%94%EC%8A%A4%EC%BD%94%EB%93%9C-%EC%B1%84%EB%84%90-webhook-%EC%84%A4%EC%A0%95\" aria-label=\"디스코드 채널 webhook 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디스코드 채널 WebHook 설정</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cd1360c90a0bf58b872c7cb585c414cb/67a79/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.432432432432435%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABl0lEQVQoz52Ry0rDUBCG8zKi9pI015O2SYxNUtOrKVYUhCJSBZfSgkupuBBx60bBN3BVRH2ivkJd/c45pKFYXeiBj+Ekc/75Z0YKGxfYP3pA2BjBsh2wsiewbPfPMEKKO1cYDF8Qdyap4FYm+mdsD1ItDOBtuWi2mqjHHXh+BJM5/3LIkbpJH49Pz4h22iQWIohiOF4NimqipFkZqs4oMqjfWXynyDuURuNL8DM8O0eznWC31yenbWrBRdX1hbjJqpBLhijyE7ygZtiiM4lfgqgh1Nc35SxBN8sZPHnZ7W8IQd7m2/sHZrMZJtc34odFjoqKLlwtnPFoWBXYFe9Ht5ng7d09FoeLmqwCvxZhO6jTTAPkCgryxRLyFGUqwpfm13bgb9eh6TYVNtIZpi0fn5zicz4XgtPpKwnQ46IqKCqacFNIkcnJ8iIU1VpymTrMk8DBYIjx1a1oidNN9tFoJQhp8zpVdg0Gh+Zo6Wxl+ysz1Clxo6BiLaegIGsoOz6SvUO0u33ErZ4QrOoWwWDSI+6y9MumueAX0JyFztfRVJUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/cd1360c90a0bf58b872c7cb585c414cb/fcda8/3.png\"\n        srcset=\"/static/cd1360c90a0bf58b872c7cb585c414cb/12f09/3.png 148w,\n/static/cd1360c90a0bf58b872c7cb585c414cb/e4a3f/3.png 295w,\n/static/cd1360c90a0bf58b872c7cb585c414cb/fcda8/3.png 590w,\n/static/cd1360c90a0bf58b872c7cb585c414cb/efc66/3.png 885w,\n/static/cd1360c90a0bf58b872c7cb585c414cb/c83ae/3.png 1180w,\n/static/cd1360c90a0bf58b872c7cb585c414cb/67a79/3.png 1408w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>특정 채널에 웹훅을 만들기 위해서는, 채널 편집에 들어가서, 연동을 들어가시고, 웹후크를 생성해줍니다.</p>\n<p>아바타 사진과, 이름 등과 같은 설정을 하시고 <strong>웹후크 URL 복사</strong>를 눌러줍니다.</p>\n<p>해당 웹후크 URL 로 서버에서 어떤 데이터를 담아 요청을 보내면 되겠습니다.</p>\n<h1 id=\"webhook-어떻게-사용하는가\" style=\"position:relative;\"><a href=\"#webhook-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%EA%B0%80\" aria-label=\"webhook 어떻게 사용하는가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WebHook 어떻게 사용하는가?</h1>\n<p><a href=\"https://discord.com/developers/docs/resources/channel#create-message\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">디스코드 공식문서 Create Message</a> 를 보시면 Json 형식의 데이터로 POST 요청을 웹후크 URL을 보내면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello, World!\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"tts\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"embeds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello, Embed!\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"This is an embedded message.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>공식 문서의 예제 코드에서는 위 Json형식의 데이터를 보내게 되는데요 한번 API를 요청을 보내보면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 524px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ad976dd6fb35a428401de379747fefe0/664c8/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABwklEQVQoz61T107DQBD019CCa1xTSO/EQCBAgihKQgsCRBAoNFEkXuDz+KDhdkmMI+CNh9He3t2OZ3bPkmnHkc1XUKr4qNUbyBWqjKzAor8iznwUawPEkj5MJwbLScL2FmC7SV6bTgLEMYZke0l0eoe4GFzj+eUVl1dD9A6O0d0/xtv7G/qnT+icfiBfGSCVSSOdqyIjBKQyRaSyJVhuArrpwjA9huTFUyiW6yhW6lhIF1AoLSKTKwvFdZRrS/xVLRrny1ErxjkXizXlhuVNQPISaaw2W9hs7wjLK8JmAxutbaytt7kFmuEIklHhSEVAYHo/CRXNwmxEw9SMjOlZBTNzKqYFpsSaYkQ2MK+YUAWxqtu/IkwsKboFWTUDdWSXhkTWaTgUqRXzSpSLFW0E/Tv+IKTLR/0z3N0/on9yjk5XDOnyGsPbBwxvHlCuLrGLL0IrhD8UEiFtklJZtbhvZFUeFepR92sA4g6daYbLkT/wF6G/vIbmxha/x+XGepC3tnYZ27tdbslqs837O3s9HlpE1IanHRCSMmWi2c5EPu4Z7VNOz4eUk4MJhXRIVmmKSrj4l3U4H7cj6OH4YdPv85/4BFsVnElS3pSTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/ad976dd6fb35a428401de379747fefe0/664c8/4.png\"\n        srcset=\"/static/ad976dd6fb35a428401de379747fefe0/12f09/4.png 148w,\n/static/ad976dd6fb35a428401de379747fefe0/e4a3f/4.png 295w,\n/static/ad976dd6fb35a428401de379747fefe0/664c8/4.png 524w\"\n        sizes=\"(max-width: 524px) 100vw, 524px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>이런식으로 오는것을 볼 수 있습니다. 자세한 사용은 공식문서를 참고하셔서 어떤 데이터를 어떻게 보낼지 찾아보시면 되겠습니다.</p>\n<h1 id=\"스프링부트에서-webhook-메시지-보내기\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8%EC%97%90%EC%84%9C-webhook-%EB%A9%94%EC%8B%9C%EC%A7%80-%EB%B3%B4%EB%82%B4%EA%B8%B0\" aria-label=\"스프링부트에서 webhook 메시지 보내기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링부트에서 WebHook 메시지 보내기</h1>\n<p>서버에서 어떠한 요청(이벤트)이 발생하게 되면은, 디스코드로 메세지를 보내는 것을 구현하겠습니다.</p>\n<h2 id=\"프로젝트-패키지-구성\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%ED%8C%A8%ED%82%A4%EC%A7%80-%EA%B5%AC%EC%84%B1\" aria-label=\"프로젝트 패키지 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝트 패키지 구성</h2>\n<ul>\n<li>\n<p>controller</p>\n<ul>\n<li><code class=\"language-text\">EventController</code></li>\n</ul>\n</li>\n<li>\n<p>discord</p>\n<ul>\n<li>\n<p>config</p>\n<ul>\n<li><code class=\"language-text\">BotConfiguration</code></li>\n</ul>\n</li>\n<li>\n<p>service</p>\n<ul>\n<li><code class=\"language-text\">WebHookService</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"application-discordyml\" style=\"position:relative;\"><a href=\"#application-discordyml\" aria-label=\"application discordyml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>application-discord.yml</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">discord<span class=\"token operator\">:</span>\n  webhookURL<span class=\"token operator\">:</span> <span class=\"token string\">\"웹후크URL\"</span></code></pre></div>\n<p>웹후크 URL을 지정합니다</p>\n<h2 id=\"botconfiguration-클래스\" style=\"position:relative;\"><a href=\"#botconfiguration-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"botconfiguration 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BotConfiguration 클래스</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BotConfiguration</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">WebHookService</span> <span class=\"token function\">webHookService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebHookService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Configuration을 통해서 WebHookService Bean을 생성하겠습니다.</p>\n<h2 id=\"webhookservice-클래스\" style=\"position:relative;\"><a href=\"#webhookservice-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"webhookservice 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WebHookService 클래스</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WebHookService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${discord.webhookURL}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span>  <span class=\"token class-name\">String</span> url<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">callEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">JSONObject</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JSONObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        data<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"content\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"[알림] 이벤트가 발생하였습니다\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JSONObject</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">HttpHeaders</span> headers <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        headers<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">APPLICATION_JSON</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">RestTemplate</span> restTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">HttpEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> entity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> headers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        restTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">postForObject</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> entity<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>서비스 클래스에서 <code class=\"language-text\">callEvent</code> 메소드가 실행되면 <code class=\"language-text\">JSON</code> 객체를 생성하고, <code class=\"language-text\">content</code> Key에 <code class=\"language-text\">value</code>로 알림을 보낼 메세지 내용을 작성했습니다.</p>\n<p>그리고 <code class=\"language-text\">send</code> 메소드에 파라미터로 <code class=\"language-text\">JSON</code> 객체를 담고 해당 메소드를 실행합니다.</p>\n<p><code class=\"language-text\">send</code> 메소드에서는 <code class=\"language-text\">RestTemplate</code> 스프링 객체를 통해서,Json 객체를 HTTP Body에 담고 <code class=\"language-text\">POST</code> 요청을 웹후크 URL로 보내게됩니다.</p>\n<h2 id=\"eventcontroller-클래스\" style=\"position:relative;\"><a href=\"#eventcontroller-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"eventcontroller 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EventController 클래스</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/event\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EventController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">WebHookService</span> webHookService<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">postEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token comment\">// 이벤트 처리 ...</span>\n        webHookService<span class=\"token punctuation\">.</span><span class=\"token function\">callEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"이벤트 발생!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>컨트롤러에서는 <code class=\"language-text\">/api/event</code> Post 요청이 들어오면 orderEvent 그 요청을 처리하게 되는데요. </p>\n<p>내부에선 이벤트 비즈니스 로직을 수행하고, 웹후크를 통해서 알림을 보냅니다.</p>\n<h2 id=\"서버-구동\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84-%EA%B5%AC%EB%8F%99\" aria-label=\"서버 구동 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버 구동</h2>\n<p>이젠 스프링부트 서버를 구동하여, API를 요청해서 알림 메세지를 받아보겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 450px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa9959708019b9f30ccce4991fdb88ba/fc2a6/5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABMUlEQVQY01WO2U7CUBiEeSODpQuclq7slaUUWpEAIoVCoaxq0HiliTeaeKHxeXwGH2g8HDXGiy8zkz//ZBIpQcZxKo2D8qL8TzmBQJAU6gl4SadozHM8+dZffjIvKkjIWQP7mzss4g2enl9w//CIzfYa8WqL9eYKr2/vNN9itPxEP/ygzxx0q4KMYkAzi1C0HCNNNCQ5CQkpo6LTHaDlnWEcRgjGM/TPA7T9LvPzeI3hKIRV3sMorCCmCS0sg9BCOWvi8C+r1l/hYepFELKF4WwB3SygNxghWqwY1boLp+Ujmk8xCcfYXu4xjWIEkxmW6x2arVMMhgHcdgdHSYEWigSNpofKSQOO60PV81CNPEqVGuxaE4ZVYkvqjge76iJftJEr2NQ78Ds9ei8yVD3HFn4B9zTBYSPkfZEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/fa9959708019b9f30ccce4991fdb88ba/fc2a6/5.png\"\n        srcset=\"/static/fa9959708019b9f30ccce4991fdb88ba/12f09/5.png 148w,\n/static/fa9959708019b9f30ccce4991fdb88ba/e4a3f/5.png 295w,\n/static/fa9959708019b9f30ccce4991fdb88ba/fc2a6/5.png 450w\"\n        sizes=\"(max-width: 450px) 100vw, 450px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">❯ curl <span class=\"token operator\">-</span><span class=\"token class-name\">X</span> <span class=\"token constant\">POST</span> <span class=\"token string\">\"http://localhost:8080/api/event\"</span></code></pre></div>\n<p>해당 URL 로 POST 요청을 보내게되면은, 디스코드에 알림이 발생하는 것을 볼 수 있습니다!</p>\n<p>이런식으로 디스코드 WebHook을 사용하시면되고, 메세지를 커스텀하여, 웹후크 메세지를 보내시면 되겠습니다.</p>\n<h1 id=\"레퍼런스\" style=\"position:relative;\"><a href=\"#%EB%A0%88%ED%8D%BC%EB%9F%B0%EC%8A%A4\" aria-label=\"레퍼런스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레퍼런스</h1>\n<p><a href=\"https://discord.com/developers/docs/resources/channel#create-message\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://discord.com/developers/docs/resources/channel#create-message</a></p>\n<p><a href=\"https://leffept.tistory.com/329\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://leffept.tistory.com/329</a></p>","excerpt":"이 글에서는 스프링부트에서 디스코드 WebHook을 사용하여, 어떠한 이벤트 요청이 오면, 알림을 알려주는 것을 해보겠습니다. WebHook 이란?  WebHook은 웹페이지 또는 웹앱에서 발생하는 특정 행동(이벤트)들을 커스텀 Callback 형식…","tableOfContents":"<ul>\n<li><a href=\"/springboot-disord-webhook/#webhook-%EC%9D%B4%EB%9E%80\">WebHook 이란?</a></li>\n<li><a href=\"/springboot-disord-webhook/#%EB%94%94%EC%8A%A4%EC%BD%94%EB%93%9C-%EC%B1%84%EB%84%90-webhook-%EC%84%A4%EC%A0%95\">디스코드 채널 WebHook 설정</a></li>\n<li><a href=\"/springboot-disord-webhook/#webhook-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%EA%B0%80\">WebHook 어떻게 사용하는가?</a></li>\n<li>\n<p><a href=\"/springboot-disord-webhook/#%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8%EC%97%90%EC%84%9C-webhook-%EB%A9%94%EC%8B%9C%EC%A7%80-%EB%B3%B4%EB%82%B4%EA%B8%B0\">스프링부트에서 WebHook 메시지 보내기</a></p>\n<ul>\n<li><a href=\"/springboot-disord-webhook/#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%ED%8C%A8%ED%82%A4%EC%A7%80-%EA%B5%AC%EC%84%B1\">프로젝트 패키지 구성</a></li>\n<li><a href=\"/springboot-disord-webhook/#application-discordyml\">application-discord.yml</a></li>\n<li><a href=\"/springboot-disord-webhook/#botconfiguration-%ED%81%B4%EB%9E%98%EC%8A%A4\">BotConfiguration 클래스</a></li>\n<li><a href=\"/springboot-disord-webhook/#webhookservice-%ED%81%B4%EB%9E%98%EC%8A%A4\">WebHookService 클래스</a></li>\n<li><a href=\"/springboot-disord-webhook/#eventcontroller-%ED%81%B4%EB%9E%98%EC%8A%A4\">EventController 클래스</a></li>\n<li><a href=\"/springboot-disord-webhook/#%EC%84%9C%EB%B2%84-%EA%B5%AC%EB%8F%99\">서버 구동</a></li>\n</ul>\n</li>\n<li><a href=\"/springboot-disord-webhook/#%EB%A0%88%ED%8D%BC%EB%9F%B0%EC%8A%A4\">레퍼런스</a></li>\n</ul>","fields":{"slug":"/springboot-disord-webhook/"},"frontmatter":{"title":"[SpringBoot] 디스코드 WebHook으로 알림 보내기","date":"Feb 19, 2022","tags":["SpringBoot","Discord","WebHook"],"keywords":["스프링","스프링부트","SpringBoot","웹훅","WebHook"],"update":"Jan 01, 0001"}}},"pageContext":{"slug":"/springboot-disord-webhook/","series":[],"lastmod":"2022-02-19"}},"staticQueryHashes":["2027115977","694178885"]}