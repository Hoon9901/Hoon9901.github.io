{"componentChunkName":"component---src-templates-post-tsx","path":"/spring-how-to-h2-jpa-setting/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"jpa-및-h2-세팅\" style=\"position:relative;\"><a href=\"#jpa-%EB%B0%8F-h2-%EC%84%B8%ED%8C%85\" aria-label=\"jpa 및 h2 세팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA 및 H2 세팅</h1>\n<p>build.gradle 파일에 h2, jpa 의존성을 추가합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\nruntimeOnly 'com.h2database:h2'</code></pre></div>\n<p>그리고 application.properties 파일에 h2 와 jpa 에 대한 설정을 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># h2 설정\nspring.h2.console.enabled=true\nspring.datasource.driver-class-name=org.h2.Driver\nspring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.username=sa\nspring.datasource.password=\n\n# JPA 설정\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.properties.hibernate.format_sql=true\n\nlogging.level.org.hibernate.type.descriptor.sql=trace</code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">spring</code></p>\n<ul>\n<li>\n<p><code class=\"language-text\">h2</code></p>\n<ul>\n<li><code class=\"language-text\">console.enabled</code> : h2 console 페이지 활성화</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">datasource</code></p>\n<ul>\n<li><code class=\"language-text\">driver-class-name</code> : 데이터베이스 드라이버를 지정</li>\n<li><code class=\"language-text\">url</code> : 데이터베이스의 경로를 지정합니다 (jdbc:h2:mem → 인메모리)</li>\n<li><code class=\"language-text\">username, password</code> : 데이터베이스 접속하는 유저 정보</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">jpa</code></p>\n<ul>\n<li><code class=\"language-text\">database-platform</code> : SQL 문법을 지정합니다.</li>\n<li><code class=\"language-text\">properties.hibernate.show_sql</code> : hibernate를 통해 CRUD의 SQL을 로그로 보여줍니다</li>\n<li><code class=\"language-text\">properties.hibernate.format_sql</code> : SQL 문법에 대한 보기좋게 포맷 지정</li>\n<li>\n<p><code class=\"language-text\">hibernate</code></p>\n<ul>\n<li><code class=\"language-text\">ddl-auto</code> : 서버를 실행할때 DB 초기화 전략을 지정합니다. (create-drop)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">logging</code></p>\n<ul>\n<li>\n<p><code class=\"language-text\">level</code></p>\n<ul>\n<li><code class=\"language-text\">org.hibernate.type.descriptor.sql</code>: 로깅을 통해 보여지는 SQL문의 내부 값을 출력합니다</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"h2-세팅-확인\" style=\"position:relative;\"><a href=\"#h2-%EC%84%B8%ED%8C%85-%ED%99%95%EC%9D%B8\" aria-label=\"h2 세팅 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>H2 세팅 확인</h1>\n<p>그리고 서버를 실행해 h2 데이터베이스의 콘솔을 시작합니다.</p>\n<p><a href=\"http://localhost:8080/h2-console\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:8080/h2-console</a> 로 접속을합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3d92a5c0f7e251079d8e18749884f203/5caea/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.08108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC0klEQVQ4y21UaW/aQBDl/3+p1KbHl/6EqmmbSlXUI6QiJ4EABt8YbGx8rW0wBsL1OrsmIZFq6XnGu7Nv582MXNmul8izGMAajw8rdlguyYbAbEI75C9mwDwHNiv899ntdvyFiman+Nt0cCtHqCuMEKPainElMVTvGM4Jlx2GWovhopXgqpOgoSW4U0t7IzPozvSJtHJad/Hxh4W3Xw0cfdEFPpwYeH9iEsj/bgr/3TedYjQcEV5/VvHmWMXRsYZXnxQc12xOhy0nZKGBvlqDqVzAJJsnGtLIRELrSWiCBTpCT0UxGWGzDLFeBNitGCEh/Sks18c0c0rJRFpxRxpurn+iUa+i064hDAwMBxqGQ13ANBUYRg9x7GE2S5DnDJ5rYOQocGwFXUWiM4OD5CgcwNTrsMwmnGEHoa/D0LuwiWxgqcLXCYwICyIsioTiG5ClC8jdS0itKp0xD4RxNMTIluCOZIxdBb6nIA51BGMVUaAJyzF2ZXijnkAw1sTFHHyPxUMIxVyy52rods4gtc8x6DeJzCSpVNe+Cs8bYr2aY7nISyxLu1hMD5hPkKUettutyLIS+iO07/tQZWt/syakOrZJWfepXhYmWSjkzqh+vI7FE1KxVhLuSsLAH1CGLSi9tpDMCXlTbMqSE+uahDTxMS+yJ6J8GhFCYaeTAFniPiMcm0RWQ0+qUX26ZZaBg9XDDA/LKdkc8/merEiFjWiUfI/HyvDdLpLHGvKmjGkE7htnRHpN2SmihvmUlRlxAgL3n4NFFsWqgpjbJLYPTWHUZWfYgut090EGSfCobmOS6glk6VhgwpH54tIyVhNJvCBMmI2IFstNGhFPRqt5Rln/hmXUaeB/0fcf3F6f0qzeUYwspPJYEU/+i7HhHYroxphkxFFfIApMgTg8+OH+m4m4Mlb4dJY3pfzZECGfn81mQ10iPFpaK/Hc376M2dvy7FaQcfwD7oag3m8xyA0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/3d92a5c0f7e251079d8e18749884f203/fcda8/1.png\"\n        srcset=\"/static/3d92a5c0f7e251079d8e18749884f203/12f09/1.png 148w,\n/static/3d92a5c0f7e251079d8e18749884f203/e4a3f/1.png 295w,\n/static/3d92a5c0f7e251079d8e18749884f203/fcda8/1.png 590w,\n/static/3d92a5c0f7e251079d8e18749884f203/efc66/1.png 885w,\n/static/3d92a5c0f7e251079d8e18749884f203/5caea/1.png 996w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>해당 페이지가 나오게 되는데 Connect 버튼을 눌러 DB에 접속합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/029ba5fb915a9bbc0146c395efec2442/52576/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.48648648648649%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABpUlEQVQoz42TYW+yMBSF+f8/bG/2YdOZoRZogSIUEaSAW0DEs9u6LdkbzNbkBNK0z7m9PXWK5BUq8+CyDTz2BJV6yJUADxbYrh+xkxvwWGITPIGxf1BiBUlzPlsg8JeoygRFVYELBhG8wDkoBs/zrGSSQOsGTaORpRHiiBbxDbKdoK+LRHJSgMPhgCxT6LoTpmnCOI64XC5WDo8SqsaHUgpFUaBtW7vgesWv40qL/pfTn4lMgL7vMQyDdfzS3Ibf5Mw5m9LngH8ZztwmA7xndDP7qa9528M54Pn8DuHTLbJnhHxlby+lm33rMnQ6QVtLUvKtTu9Iqf3OAofhDWy7RByuCbbCy+KBYrJEngVo6pTAe5za/FstmXR1RIrvVDi8UyRa+29uXUpJMckQhhHyfE9Hu/V3sntABpQOA9RyHtgPJ2zDV4QiJIigwFMeBaesMqxdF77v4XisrKnWmqo2rYjvA00Po4SDc04gYRXHsQ10WZZWFb0Ooz1lt652Fmh6OwsczZFLhbY50rOU1E+Xws+wz1MCc3RtjenSYyTjcexvffw88geZrZVxPaXveQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/029ba5fb915a9bbc0146c395efec2442/fcda8/2.png\"\n        srcset=\"/static/029ba5fb915a9bbc0146c395efec2442/12f09/2.png 148w,\n/static/029ba5fb915a9bbc0146c395efec2442/e4a3f/2.png 295w,\n/static/029ba5fb915a9bbc0146c395efec2442/fcda8/2.png 590w,\n/static/029ba5fb915a9bbc0146c395efec2442/efc66/2.png 885w,\n/static/029ba5fb915a9bbc0146c395efec2442/c83ae/2.png 1180w,\n/static/029ba5fb915a9bbc0146c395efec2442/52576/2.png 1412w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>해당 페이지가 나타나면 정상적으로 h2 세팅이 완료됬습니다.</p>\n<h1 id=\"jpa-세팅-확인\" style=\"position:relative;\"><a href=\"#jpa-%EC%84%B8%ED%8C%85-%ED%99%95%EC%9D%B8\" aria-label=\"jpa 세팅 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA 세팅 확인</h1>\n<ul>\n<li>\n<p>JPA 의 동작 원리</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/032cb49f81f565557c8d68ec2ba02920/27524/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABX0lEQVQoz42SW4+CQAyF+f+/S57WFwVxNwIziApoAO8XFM/OaTKEaMxukzLXfnPa4gyHX9A6wXKZwXUH8H0fnufhZxogmH5jnsyh4ggD14XSGlmWYTIJ4I/HSNMUU3MnjhWsOUEQIAoj5HlhYB6iOEaSJEi0glIai8UCcRRhNBoJMM9zs68QzmZGxBJhGGK1WuF8PuNyucCx5KZp0NzvuN1u4lfjTWPG61XO/rLn84m2beFwcjeg4/Eom4/HQ5zz/X4vXpalqOkbY/gQ79G7lPkhgJJf7XQ6yatM5XA4iBPCB+q6ljVHq5Du2NcYTOPl9XrdKSyKQoJYO94hfLvdYrfbdY9QkIV2QF5kAIusTfE5J5AF51hVlYAJ4siMWF+W6g34KWW7x0CrinsEbjabLvW3lAn81BQq5RkBr03h39DvctcULmygda5ZHyqzDegr6YPsWhT2D//zr72C+jDaL1DRUQ5SZ0fvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/032cb49f81f565557c8d68ec2ba02920/fcda8/3.png\"\n        srcset=\"/static/032cb49f81f565557c8d68ec2ba02920/12f09/3.png 148w,\n/static/032cb49f81f565557c8d68ec2ba02920/e4a3f/3.png 295w,\n/static/032cb49f81f565557c8d68ec2ba02920/fcda8/3.png 590w,\n/static/032cb49f81f565557c8d68ec2ba02920/27524/3.png 646w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n</ul>\n<p>JPA가 정상적으로 구동하는지 테스트로 코드를 수정합니다.</p>\n<h2 id=\"user-클래스-수정\" style=\"position:relative;\"><a href=\"#user-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%88%98%EC%A0%95\" aria-label=\"user 클래스 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User 클래스 수정</h2>\n<p>User Entity 클래스을 수정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@Setter</span>\n<span class=\"token annotation punctuation\">@ToString</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>@Entity : 지정한 클래스를 DB의 테이블과 일대일 매칭</li>\n<li>@Id : PK 필드를 지정</li>\n<li>@GenratedValue : PK의 키값 생성 전략 지정 (GenerationType.IDENTITY는 DB에 전략생성 위임)</li>\n</ul>\n<h2 id=\"userrepository-수정\" style=\"position:relative;\"><a href=\"#userrepository-%EC%88%98%EC%A0%95\" aria-label=\"userrepository 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UserRepository 수정</h2>\n<p>이전에는 UserRepository 인터페이스가 상속을 받지 않았고, UserRepositoryImpl 구현체가 있었습니다.</p>\n<p>이제는 JPA를 통해서 DB CRUD를 진행하므로 인터페이스를 작성하고 JpaRepository를 상속만 하면됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserRepository</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">JpaRepository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findByName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* 개발자가 직접 쿼리를 작성한 예시 (참고로 JPQL은 테이블이 아닌 엔티티를 대상으로 쿼리를 발생함)\npublic interface PostsRepository extends JpaRepository&lt;Posts, Long> {\n\n    @Query(\"select p from Posts p order by p.id desc\")\n    List&lt;Posts> findAllDesc();\n*/</span></code></pre></div>\n<ul>\n<li>\n<p>@Query : 어노테이션을 메소드에 지정하여 개발자가 직접 쿼리(JPQL, SQL)를 작성할 수 있습니다. (<code class=\"language-text\">nativeQuery = true</code> 옵션을 통해 SQL 문으로 작성함)</p>\n<p>해당 어노테이션은 SQL 문법오류를 체크하지 못하고 런타임 에러가 발생하지 못하는 단점 있으므로 이는 Querydsl을 참고해주세요</p>\n</li>\n</ul>\n<p>JPA 의 엄청난 쿼리메소드 기능을 통해 이용자의 이름을 DB에 검색하는 기능을 추가하겠습니다.</p>\n<p>인터페이스에 findByName 메소드를 추가합니다. </p>\n<p>해당 메소드는 name 변수를 매개변수로 받아서 DB에 해당 name과 동일한 객체를 찾아 반환합니다.</p>\n<h2 id=\"서버-실행\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84-%EC%8B%A4%ED%96%89\" aria-label=\"서버 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버 실행</h2>\n<p>이제 서버를 구동하여 JPA 가 정상적으로 작동하는지 확인해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">01</span><span class=\"token operator\">-</span><span class=\"token number\">20</span> <span class=\"token number\">00</span><span class=\"token operator\">:</span><span class=\"token number\">55</span><span class=\"token operator\">:</span><span class=\"token number\">24.381</span>  <span class=\"token constant\">INFO</span> <span class=\"token number\">2081</span> <span class=\"token operator\">--</span><span class=\"token operator\">-</span> <span class=\"token punctuation\">[</span>           main<span class=\"token punctuation\">]</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>hibernate<span class=\"token punctuation\">.</span>dialect<span class=\"token punctuation\">.</span></span>Dialect</span>            <span class=\"token operator\">:</span> <span class=\"token constant\">HHH000400</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Using</span> dialect<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>hibernate<span class=\"token punctuation\">.</span>dialect<span class=\"token punctuation\">.</span></span>H2Dialect</span>\n<span class=\"token class-name\">Hibernate</span><span class=\"token operator\">:</span> \n    \n    drop table <span class=\"token keyword\">if</span> exists user <span class=\"token constant\">CASCADE</span> \n<span class=\"token class-name\">Hibernate</span><span class=\"token operator\">:</span> \n    \n    create table user <span class=\"token punctuation\">(</span>\n       id bigint generated by <span class=\"token keyword\">default</span> as identity<span class=\"token punctuation\">,</span>\n        name <span class=\"token function\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        primary key <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">01</span><span class=\"token operator\">-</span><span class=\"token number\">20</span> <span class=\"token number\">00</span><span class=\"token operator\">:</span><span class=\"token number\">55</span><span class=\"token operator\">:</span><span class=\"token number\">24.508</span>  <span class=\"token constant\">INFO</span> <span class=\"token number\">2081</span> <span class=\"token operator\">--</span><span class=\"token operator\">-</span> <span class=\"token punctuation\">[</span>           main<span class=\"token punctuation\">]</span> <span class=\"token class-name\"><span class=\"token namespace\">o<span class=\"token punctuation\">.</span>h<span class=\"token punctuation\">.</span>e<span class=\"token punctuation\">.</span>t<span class=\"token punctuation\">.</span>j<span class=\"token punctuation\">.</span>p<span class=\"token punctuation\">.</span>i<span class=\"token punctuation\">.</span></span>JtaPlatformInitiator</span>       <span class=\"token operator\">:</span> <span class=\"token constant\">HHH000490</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Using</span> <span class=\"token class-name\">JtaPlatform</span> implementation<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>hibernate<span class=\"token punctuation\">.</span>engine<span class=\"token punctuation\">.</span>transaction<span class=\"token punctuation\">.</span>jta<span class=\"token punctuation\">.</span>platform<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span></span>NoJtaPlatform</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>서버를 실행하면 로그에 해당 Hibernate 로그가 발생하는 것을 볼수있습니다. 이것은 application.properties에 작성한 <code class=\"language-text\">show_sql</code> 속성을 통해서 Hibernate의 CRUD가 SQL 구문으로 출력되는 것이고, <code class=\"language-text\">ddl-auto</code> 에 속성을 통해 우리가 지정한 전략(create-drop)을 통해서 DB의 테이블이 초기화되는 부분입니다.</p>\n<p>그리고 @Entity 으로 지정한 User 클래스가 테이블로 생성되는 구문 또한 확인할 수 있습니다.</p>\n<h3 id=\"user-테이블-생성확인\" style=\"position:relative;\"><a href=\"#user-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%83%9D%EC%84%B1%ED%99%95%EC%9D%B8\" aria-label=\"user 테이블 생성확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User 테이블 생성확인</h3>\n<p><a href=\"http://localhost:8080/h2-console\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:8080/h2-console</a> 에 접속하여, USER 테이블이 생성됬는지 확인하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0b5ad499ea520f6dce1c5332d944d86d/f79fa/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhElEQVQoz5VRf3OiMBTM9/9Qd+394aGngD+iMJQC0hZBIwEF5kDZe6a1Z6l2pjuzSfZNsrPvhaWJDcuyYds2PM+D67qQUuKMJFlhxk0sFlMMRz1o2j3d5RiPh0r3ej9hkR7pGvicg+V5jiB8pgcLVFWFtm1xPB4VT4hWCXqaDsvxoZsc/T8mfg8MPEUbCLlHInKItMBmuyNdgDV1A5nt8PwSqYRdNHVNa9uptrgFVv+tsFpF4NyidjRqMVFJsyxDWZZomoZS4z/PliSuka2TJXxvBtOcwjB0NcMoihAEAeI4xuFwUBevm3yusSjewOAezXCuDE6JLlFTy7fSXE34+LSG8+DCcRx4vq+ShWEIIcS74XfADm+/eW6pey7Kin4wxVZm2KYSG5GSlhDErcxf62p/JftqwCfsdwLD/g/waR9z4sT4pfhgD1HkIfLU/0B2+bh7VoZ5CmNk4P5uhoE2wTq2sM9C7OSSDJZqvyS7NYuzYVmk8F0dwaOBpWcSJ2QUvLNr+A+PKEXz9QAnVgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/0b5ad499ea520f6dce1c5332d944d86d/fcda8/4.png\"\n        srcset=\"/static/0b5ad499ea520f6dce1c5332d944d86d/12f09/4.png 148w,\n/static/0b5ad499ea520f6dce1c5332d944d86d/e4a3f/4.png 295w,\n/static/0b5ad499ea520f6dce1c5332d944d86d/fcda8/4.png 590w,\n/static/0b5ad499ea520f6dce1c5332d944d86d/efc66/4.png 885w,\n/static/0b5ad499ea520f6dce1c5332d944d86d/f79fa/4.png 940w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>USER 테이블이 정상적으로 생성됬습니다. </p>\n<h3 id=\"db-저장-확인\" style=\"position:relative;\"><a href=\"#db-%EC%A0%80%EC%9E%A5-%ED%99%95%EC%9D%B8\" aria-label=\"db 저장 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DB 저장 확인</h3>\n<p>이제 API 를 통해 회원가입을 진행하고 해당 값이 정상적으로 저장됬는지 확인하겠습니다.</p>\n<ul>\n<li>요청 : <code class=\"language-text\">POST</code> <a href=\"http://localhost:8080/user/new?name=hoon\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:8080/user/new?name=hoon</a></li>\n<li>\n<p>응답 :</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">저장됨 hoon</code></pre></div>\n</li>\n<li>\n<p>서버 로그</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">Hibernate<span class=\"token operator\">:</span> \n    select\n        user0_.id as id1_0_<span class=\"token punctuation\">,</span>\n        user0_.name as name2_0_ \n    from\n        user user0_ \n    where\n        user0_.name=?\n<span class=\"token number\">2022</span><span class=\"token number\">-01</span><span class=\"token number\">-20</span> <span class=\"token number\">01</span><span class=\"token operator\">:</span><span class=\"token number\">09</span><span class=\"token operator\">:</span><span class=\"token number\">03.889</span> TRACE <span class=\"token number\">2081</span> --- <span class=\"token punctuation\">[</span>nio<span class=\"token number\">-8080</span>-exec<span class=\"token number\">-9</span><span class=\"token punctuation\">]</span> o.h.type.descriptor.sql.BasicBinder      <span class=\"token operator\">:</span> binding parameter <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> as <span class=\"token punctuation\">[</span>VARCHAR<span class=\"token punctuation\">]</span> - <span class=\"token punctuation\">[</span>hoon<span class=\"token punctuation\">]</span>\nHibernate<span class=\"token operator\">:</span> \n    insert \n    into\n        user\n        (id<span class=\"token punctuation\">,</span> name) \n    values\n        (<span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span> ?)\n<span class=\"token number\">2022</span><span class=\"token number\">-01</span><span class=\"token number\">-20</span> <span class=\"token number\">01</span><span class=\"token operator\">:</span><span class=\"token number\">09</span><span class=\"token operator\">:</span><span class=\"token number\">03.909</span> TRACE <span class=\"token number\">2081</span> --- <span class=\"token punctuation\">[</span>nio<span class=\"token number\">-8080</span>-exec<span class=\"token number\">-9</span><span class=\"token punctuation\">]</span> o.h.type.descriptor.sql.BasicBinder      <span class=\"token operator\">:</span> binding parameter <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> as <span class=\"token punctuation\">[</span>VARCHAR<span class=\"token punctuation\">]</span> - <span class=\"token punctuation\">[</span>hoon<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n</ul>\n<p>해당 요청(회원가입)이 서버 로그에 select, insert 쿼리가 발생하는 것을 확인할 수 있습니다.</p>\n<p>이제 h2 콘솔에서 저장된 값을 확인하겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 412px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fd6a784f2c80a6f38a8191cc96481db0/9e32a/5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 127.70270270270272%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAACkklEQVRIx+2UV4/aQBRG/f9/R16iSMkWdiFZeghZWAzrsjamGhvTccGFpX4ZhkAAoTSeImWkozv1+HpmNEx36IBT2uAVDWKtD6k+AivUUZJU0qdDqLQpz3KLRB1y0yL9BvJc9YgsW6aR6XR6eH91i0Qyg2QqQyMvyGCLPKKxJG5uw4h8jOIxxyIceUDoLoJoPIX+wITjBrAcD/aGiU8jY9sWikUWsiShXJahtVp4fZ3CIf21ahWiKECSXtBu6xAFARz3DEUpYz6f4VxhgiDA35T1en0WxvM8LJdLrFarPbvBw75TNuM78VGGvu/TCYdfPc3kdOy0/lPhpeW/8F8QXspeuElu24mLIEKP5LbaXeOLYUzbg9F30Rl46BJoHG7p0La7p3vQ3s7x93N30MdhZA4xcW2Y9pg8QRbG5ohiO+SJmthbNuPWmM6bfK8Phn0MR4MjmOXchd4sIZMMoSI9opCLQhKy0FUez4U4vmbuweYeUMxHodZYZD/fIZ24htYoYerq8GwVnvMDZrnwIYtZhG7eIE2k0U9viTCBQY8H+xRDPHpN+j4glQihkI8jfPeOtK+gSHn4kzYmVoug7SHCCdS6gmxGg6EpeMzWEAmruL5qQuCacMwaZkGPMvUMzKc9SuBuZa6tHUGFjaqMRKyOZl1EJl0lGei4D2koFsroGSKRtggqFWzirr4RnEqZxYycml6G644RBC7qNRFtXUG/18B6NYc5Msgi9eziczALciiGXoFpWuSCL8HzHFKpNGRZpjfTtrp/JlwuPFTkPKpllmx6AlwpQ+tc6Qv5/QjZX+5g838rQw/1CkuvSSEXwxNh84EXnghT92g1/lA4mzpkgU4w9qcZuAZe/Q45zf5e9ivRjm+BR7aSnq293wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/fd6a784f2c80a6f38a8191cc96481db0/9e32a/5.png\"\n        srcset=\"/static/fd6a784f2c80a6f38a8191cc96481db0/12f09/5.png 148w,\n/static/fd6a784f2c80a6f38a8191cc96481db0/e4a3f/5.png 295w,\n/static/fd6a784f2c80a6f38a8191cc96481db0/9e32a/5.png 412w\"\n        sizes=\"(max-width: 412px) 100vw, 412px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>이제 h2 및 jpa 의 기본적인 설정이 끝났습니다.</p>\n<p>추가적인 사용법은 레퍼런스를 참고해주세요</p>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p><a href=\"https://dololak.tistory.com/285\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://dololak.tistory.com/285</a></p>\n<p><a href=\"https://oingdaddy.tistory.com/264\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Spring 에서 h2 database 간단 사용법</a> </p>\n<p><a href=\"https://www.icatpark.com/entry/JPA-%EA%B8%B0%EB%B3%B8-Annotation-%EC%A0%95%EB%A6%AC\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.icatpark.com/entry/JPA-기본-Annotation-정리</a></p>","excerpt":"JPA 및 H2 세팅 build.gradle 파일에 h2, jpa 의존성을 추가합니다. 그리고 application.properties 파일에 h2 와 jpa 에 대한 설정을 작성합니다.    : h2 console 페이지 활성화   : 데이터베이스…","tableOfContents":"<ul>\n<li><a href=\"/spring-how-to-h2-jpa-setting/#jpa-%EB%B0%8F-h2-%EC%84%B8%ED%8C%85\">JPA 및 H2 세팅</a></li>\n<li><a href=\"/spring-how-to-h2-jpa-setting/#h2-%EC%84%B8%ED%8C%85-%ED%99%95%EC%9D%B8\">H2 세팅 확인</a></li>\n<li>\n<p><a href=\"/spring-how-to-h2-jpa-setting/#jpa-%EC%84%B8%ED%8C%85-%ED%99%95%EC%9D%B8\">JPA 세팅 확인</a></p>\n<ul>\n<li><a href=\"/spring-how-to-h2-jpa-setting/#user-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%88%98%EC%A0%95\">User 클래스 수정</a></li>\n<li><a href=\"/spring-how-to-h2-jpa-setting/#userrepository-%EC%88%98%EC%A0%95\">UserRepository 수정</a></li>\n<li>\n<p><a href=\"/spring-how-to-h2-jpa-setting/#%EC%84%9C%EB%B2%84-%EC%8B%A4%ED%96%89\">서버 실행</a></p>\n<ul>\n<li><a href=\"/spring-how-to-h2-jpa-setting/#user-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%83%9D%EC%84%B1%ED%99%95%EC%9D%B8\">User 테이블 생성확인</a></li>\n<li><a href=\"/spring-how-to-h2-jpa-setting/#db-%EC%A0%80%EC%9E%A5-%ED%99%95%EC%9D%B8\">DB 저장 확인</a></li>\n</ul>\n</li>\n<li><a href=\"/spring-how-to-h2-jpa-setting/#reference\">Reference</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/spring-how-to-h2-jpa-setting/"},"frontmatter":{"title":"[SpringBoot] 프로젝트에 H2 및 JPA 세팅법","date":"Jul 05, 2022","tags":["SpringBoot"],"keywords":["Spring","SpringBoot","H2","h2","jpa"],"update":"Jan 01, 0001"}}},"pageContext":{"slug":"/spring-how-to-h2-jpa-setting/","series":[],"lastmod":"2022-07-05"}},"staticQueryHashes":["2027115977","694178885"]}