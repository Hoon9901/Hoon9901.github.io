{"componentChunkName":"component---src-templates-post-tsx","path":"/react-tts/","result":{"data":{"markdownRemark":{"html":"<p>외부 라이브러리 없이, 웹 표준을 만족하는 API인 Web Speech API 만으로 TTS를 사용해보자.</p>\n<p>Web Speech API는 크게 SpeechSynthesis(Text-to-Speech)와 SpeechRecognition (Asynchronous Speech Recognition) 두 가지로 나뉜다.</p>\n<p>SpeechSynthesis는 텍스트를 음성으로 변환하는 API이고, SpeechRecognition은 음성을 텍스트로 변환하는 API이다. 우리가 사용해야할 API는 SpeechSynthesis이다. 해당 API는 대부분의 모던 브라우저에서는 지원된다. (해당 API가 지원하는 브라우저 목록이 궁금하다면? <a href=\"https://caniuse.com/?search=speech\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://caniuse.com/?search=speech</a>)</p>\n<h2 id=\"1-web-speech-api-세팅\" style=\"position:relative;\"><a href=\"#1-web-speech-api-%EC%84%B8%ED%8C%85\" aria-label=\"1 web speech api 세팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Web Speech API 세팅</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> pitch <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> rate <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">populateVoiceList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">synth<span class=\"token operator\">:</span> SpeechSynthesis</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> voices <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> synth<span class=\"token punctuation\">.</span><span class=\"token function\">getVoices</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> aname <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> bname <span class=\"token operator\">=</span> b<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>aname <span class=\"token operator\">&lt;</span> bname<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>aname <span class=\"token operator\">===</span> bname<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">return</span> <span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n      <span class=\"token keyword\">return</span> voices<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failure retrieving voices\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">speak</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">textToRead<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> synth<span class=\"token operator\">:</span> SpeechSynthesis</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>speechSynthesis<span class=\"token punctuation\">.</span>onvoiceschanged <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      speechSynthesis<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onvoiceschanged</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> populateVoiceList\n    <span class=\"token punctuation\">}</span>\n  \n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>synth<span class=\"token punctuation\">.</span>speaking<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"speechSynthesis.speaking\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textToRead <span class=\"token operator\">!==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> utterThis <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SpeechSynthesisUtterance</span><span class=\"token punctuation\">(</span>textToRead<span class=\"token punctuation\">)</span>\n      utterThis<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onend</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">}</span>\n      utterThis<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SpeechSynthesisUtterance.onerror\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token comment\">// utterThis.voice = voices[0]</span>\n      utterThis<span class=\"token punctuation\">.</span>pitch <span class=\"token operator\">=</span> pitch\n      utterThis<span class=\"token punctuation\">.</span>rate <span class=\"token operator\">=</span> rate\n      synth<span class=\"token punctuation\">.</span><span class=\"token function\">speak</span><span class=\"token punctuation\">(</span>utterThis<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">speechSynthesis.onvoiceschanged</code> 조건문은 우리가 사용할 수 있는 음성 목록을 가져온다.</p>\n<ul>\n<li>해당 부분에 synth.getVoices()를 통해 임의의 사용자 지정 음성 목록을 만들면 유용하다.</li>\n</ul>\n<p>이 단계를 건너뛰면 <code class=\"language-text\">SpeechSynthesis</code>에 음성을 제공하지 않아 오류가 발생할 수 있다. 비동기로 설정하지 않으면 음성 합성기가 읽기를 시도할 때 음성이 잘리거나 준비되지 않을 수 있는 문제가 발생한다.</p>\n<p>그 후 함수의 인자로 넘어온 textToRead 문자열 검사를 한 후, synth.speak(utterThis) 함수를 사용하므로 음성 재생을 한다.</p>\n<h2 id=\"2-button으로-tts-재생\" style=\"position:relative;\"><a href=\"#2-button%EC%9C%BC%EB%A1%9C-tts-%EC%9E%AC%EC%83%9D\" aria-label=\"2 button으로 tts 재생 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Button으로 TTS 재생</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span>\n   <span class=\"token attr-name\">variant</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>outlined<span class=\"token punctuation\">\"</span></span>\n   <span class=\"token attr-name\">startIcon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CampaignIcon</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span>\n   <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       speechSynthesis<span class=\"token punctuation\">.</span><span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token function\">speak</span><span class=\"token punctuation\">(</span><span class=\"token string\">'여름에 해당하는 이미지를 찾으세요'</span><span class=\"token punctuation\">,</span> window<span class=\"token punctuation\">.</span>speechSynthesis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n설명 듣기\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>mui component의 Button 컴포넌트를 구현하여 사용했다.</p>\n<p>버튼이 클릭되면 speechSynthesis API를 종료하고, 제작한 speak 함수를 호출한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/50d220b61d8013607edf74c2c9d3c8a8/75a80/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.4054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAAEHElEQVQ4y4WTfUzUdRzHf221xT/RKKY2LN35xIOJgWiogIog4A7tWCCgQlAKWMqTVqNYOSsjEVxmCuTxkByIDBA4FAgJxQB5ugN5ujuBuwMUaUomwgGvflr+09x8b+999vl+93nv/d738xUmJqf56+EU9x5M8feECdP0DLOzs8zMzDyTj/H4/jGfBeGhCcYn4c+HMDnDc/FU6Kno/yloNRquX7tKe1sLTY0NtLW2oNNquNnZ8eSspfkGapUKtVpNX1/vk6HpaRPTM9P/1v9oMk09SSAMjdyhS3ML48goukEjg2IdunuP26P30epG6NcPM2gwiGIahodGnptAuKtppeL0Ecp/TaUy8xiNvySjyk+hviIVfW86RemH0ba38GjiPs3t1RTVXiC77CzK+mLOK+WcrzhHXnE2R1MTaWyrR6jKOkHoghdJcFuIzM4MPwuBw+6vknJwAXknnPnEy4yzKT/Qr20jUx5LQ1o8jd/t5UZBEhFf72RLkAuuHisxnyeQoUhBqMzLIMrVlq98HJGtn887Vq+Q4ruU3MRNnIsNQB5rR2OenLEHg2iPf4wxWIYuKozebw7TczmLQwcDsF9nw1xbCxSlaQgXc84QuPh1QlfNx832NYJt51P4/hZOBi7niNdSkqMk1OXLxTXQ0RPgQU+gLwPxkVzZE4Yx6yQ1B4LI8VlHyNpFKPJ/Qrhekkmc2OxxXcZux4Vkbl3F92vsCHKwIC7EngAPC3IyTsHNZtTioHZPMMa4SFpjoug/dZw/EvfS7OWCwd+be6UXxMi5P7PXzpKUkE1EeNkRYGVO9Mo5BDpZEbHNmv1bbcguyIHuVrqlbmiCfBmMCkX3eSy6hDh0Px7iN29n6jzWcKcwF+GSIg3POQKx0hWi7Xmc8lzNsY32JHvYke/vTPoOBxRXiuG2BpXvBnq3b8HwUSC9n8XS9Wk0PZlfoPkyHN1OKWPKIoRS0aG79ct84L2ID+2tOO3rSNJGa85INyCXeRD/7lsoKgsxTQ3QGeOP2sWZvn2iYHQYPeH+DEeHot0lQ7NtM2MlYuSCi9lIJGastrXkvaVzCV1sgdzTniypC0dWSZDaW1LRUMWN7mtczYlB672B6nBP0d0uyp0dqNnuSZufD2rRwJ2ifIQycUGtXSVInJax38eGsp1uJK235qjXm+RsW0uIyxKKay/SomogMiGAE8HriX/7DdSnDzAg86R+szMdvu4YZO48qixBUCgzsVj+gkhLDnqtIMvVhkO25qyd9xIxkjn4LTSnMD8b4/1+IhJ24LRxCatFAz7iA7Ykh2OIlGLcJ6P3290MqKoQ9MMDlFcXoaxRoqq9zK2ackaaa+moq6KrWsnvyhJGjHrGxa/X2nEN1c0m6hrruHypnE5NE5MP9EyO6xka68YwqucfaDeO8NwNw5gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/50d220b61d8013607edf74c2c9d3c8a8/fcda8/1.png\"\n        srcset=\"/static/50d220b61d8013607edf74c2c9d3c8a8/12f09/1.png 148w,\n/static/50d220b61d8013607edf74c2c9d3c8a8/e4a3f/1.png 295w,\n/static/50d220b61d8013607edf74c2c9d3c8a8/fcda8/1.png 590w,\n/static/50d220b61d8013607edf74c2c9d3c8a8/efc66/1.png 885w,\n/static/50d220b61d8013607edf74c2c9d3c8a8/75a80/1.png 1134w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위 와 같은 모습으로 간단하게 TTS 기능을 구현할 수 있다.</p>\n<h1 id=\"레퍼런스\" style=\"position:relative;\"><a href=\"#%EB%A0%88%ED%8D%BC%EB%9F%B0%EC%8A%A4\" aria-label=\"레퍼런스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레퍼런스</h1>\n<p><a href=\"https://blog.seulgi.kim/2016/08/web-speechsynthesis-tts-api.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://blog.seulgi.kim/2016/08/web-speechsynthesis-tts-api.html</a></p>\n<p><a href=\"https://www.singlestoneconsulting.com/blog/how-to-build-a-text-to-speech-app-with-the-web-speech-api/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.singlestoneconsulting.com/blog/how-to-build-a-text-to-speech-app-with-the-web-speech-api/</a></p>","excerpt":"외부 라이브러리 없이, 웹 표준을 만족하는 API인 Web Speech API 만으로 TTS를 사용해보자. Web Speech API는 크게 SpeechSynthesis(Text-to-Speech)와 SpeechRecognition (Asynchro…","tableOfContents":"<ul>\n<li>\n<ul>\n<li><a href=\"/react-tts/#1-web-speech-api-%EC%84%B8%ED%8C%85\">1. Web Speech API 세팅</a></li>\n<li><a href=\"/react-tts/#2-button%EC%9C%BC%EB%A1%9C-tts-%EC%9E%AC%EC%83%9D\">2. Button으로 TTS 재생</a></li>\n</ul>\n</li>\n<li><a href=\"/react-tts/#%EB%A0%88%ED%8D%BC%EB%9F%B0%EC%8A%A4\">레퍼런스</a></li>\n</ul>","fields":{"slug":"/react-tts/"},"frontmatter":{"title":"[React] 외부 라이브러리 없이 Text To Speech(TTS)를 사용해보자","date":"Jul 13, 2022","tags":["React"],"keywords":["React","리액트","TTS","TexttoSpeech"],"update":"Jan 01, 0001"}}},"pageContext":{"slug":"/react-tts/","series":[],"lastmod":"2022-07-13"}},"staticQueryHashes":["2027115977","694178885"]}