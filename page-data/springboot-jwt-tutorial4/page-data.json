{"componentChunkName":"component---src-templates-post-tsx","path":"/springboot-jwt-tutorial4/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"1-dto-클래스-생성\" style=\"position:relative;\"><a href=\"#1-dto-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%83%9D%EC%84%B1\" aria-label=\"1 dto 클래스 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. DTO 클래스 생성</h1>\n<h2 id=\"logindto-클래스\" style=\"position:relative;\"><a href=\"#logindto-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"logindto 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LoginDto 클래스</h2>\n<p>외부와의 통신에 사용할 DTO 패키지 및 클래스를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"clike\"><pre class=\"language-clike\"><code class=\"language-clike\">@Getter\n@Setter\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class <span class=\"token class-name\">LoginDto</span> <span class=\"token punctuation\">{</span>\n\n    @NotNull\n    @<span class=\"token function\">Size</span><span class=\"token punctuation\">(</span>min <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> max <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\n    private String username<span class=\"token punctuation\">;</span>\n\n    @NotNull\n    @<span class=\"token function\">Size</span><span class=\"token punctuation\">(</span>min <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> max <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    private String password<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Lombok 어노테이션(Get, Set 등)이 추가되었고 @Valid 관련 어노테이션을 추가했습니다.</p>\n<p>로그인 할 이용자의 아이디, 비밀번호를 담을 username, password 필드를 가집니다.</p>\n<h2 id=\"tokendto-클래스\" style=\"position:relative;\"><a href=\"#tokendto-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"tokendto 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TokenDto 클래스</h2>\n<p>Token 정보를 Response 할때 사용할 TokenDto를 만들겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"clike\"><pre class=\"language-clike\"><code class=\"language-clike\">@Getter\n@Setter\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class <span class=\"token class-name\">TokenDto</span> <span class=\"token punctuation\">{</span>\n\n    private String token<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"userdto-클래스\" style=\"position:relative;\"><a href=\"#userdto-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"userdto 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UserDto 클래스</h2>\n<p>회원가입시에 사용할 UserDto 클래스도 미리 만들어주겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"clike\"><pre class=\"language-clike\"><code class=\"language-clike\">@Getter\n@Setter\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class <span class=\"token class-name\">UserDto</span> <span class=\"token punctuation\">{</span>\n\n    @NotNull\n    @<span class=\"token function\">Size</span><span class=\"token punctuation\">(</span>min <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> max <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\n    private String username<span class=\"token punctuation\">;</span>\n\n    @<span class=\"token function\">JsonProperty</span><span class=\"token punctuation\">(</span>access <span class=\"token operator\">=</span> JsonProperty<span class=\"token punctuation\">.</span>Access<span class=\"token punctuation\">.</span>WRITE_ONLY<span class=\"token punctuation\">)</span>\n    @NotNull\n    @<span class=\"token function\">Size</span><span class=\"token punctuation\">(</span>min <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> max <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    private String password<span class=\"token punctuation\">;</span>\n\n    @NotNull\n    @<span class=\"token function\">Size</span><span class=\"token punctuation\">(</span>min <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> max <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\n    private String nickname<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"2-repository-관련-코드-작성\" style=\"position:relative;\"><a href=\"#2-repository-%EA%B4%80%EB%A0%A8-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\" aria-label=\"2 repository 관련 코드 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Repository 관련 코드 작성</h1>\n<p>이제 Repository들을 만들어주기 위해 repository 패키지를 생성합니다.</p>\n<h2 id=\"userrepository-인터페이스\" style=\"position:relative;\"><a href=\"#userrepository-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4\" aria-label=\"userrepository 인터페이스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UserRepository 인터페이스</h2>\n<p>이전에 만들었던 User 엔티티에 매핑되는 UserRepository 인터페이스를 만들겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"clike\"><pre class=\"language-clike\"><code class=\"language-clike\">public interface <span class=\"token class-name\">UserRepository</span> extends <span class=\"token class-name\">JpaRepository</span><span class=\"token operator\">&lt;</span>User<span class=\"token punctuation\">,</span> Long<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    @<span class=\"token function\">EntityGraph</span><span class=\"token punctuation\">(</span>attributePaths <span class=\"token operator\">=</span> <span class=\"token string\">\"authorities\"</span><span class=\"token punctuation\">)</span>\n    Optional<span class=\"token operator\">&lt;</span>User<span class=\"token operator\">></span> <span class=\"token function\">findOneWithAuthoritiesByUsername</span><span class=\"token punctuation\">(</span>String username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">EntityGraph</code> : 쿼리가 수행될때 Lazy 조회가 아니고 Eager조회로 authorities 정보를 같이가져옵니다.</p>\n<ul>\n<li>Lazy, Eager : 지연로딩(lazy), 즉시로딩(eager) 연관관계의 데이터를 어떻게 가져올지 (fetch)</li>\n</ul>\n</li>\n</ul>\n<p><code class=\"language-text\">JpaRepository</code>를 <code class=\"language-text\">extends</code> 하면 <code class=\"language-text\">findAll</code>, <code class=\"language-text\">save</code> 등의 메소드를 기본적으로 사용할 수 있습니다.</p>\n<p><code class=\"language-text\">findOneWithAuthoritiesByUsername</code> 메소드는 username을 기준으로 User 정보를 가져올때 권한 정보도 같이 가져오게됩니다.</p>\n<h1 id=\"3-로그인-api-관련-로직-생성\" style=\"position:relative;\"><a href=\"#3-%EB%A1%9C%EA%B7%B8%EC%9D%B8-api-%EA%B4%80%EB%A0%A8-%EB%A1%9C%EC%A7%81-%EC%83%9D%EC%84%B1\" aria-label=\"3 로그인 api 관련 로직 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 로그인 API, 관련 로직 생성</h1>\n<h2 id=\"customuserdetailsservice-클래스\" style=\"position:relative;\"><a href=\"#customuserdetailsservice-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"customuserdetailsservice 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CustomUserDetailsService 클래스</h2>\n<p>Spring Security에서 중요한 부분중 하나인 UserDetailsService를 구현한 CustomUserDetailsService 클래스를 생성하겠습니다. </p>\n<p>먼저 service 패키지를 만들어고 해당 패키지에 클래스를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"clike\"><pre class=\"language-clike\"><code class=\"language-clike\">@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"userDetailsService\"</span><span class=\"token punctuation\">)</span>\npublic class <span class=\"token class-name\">CustomUserDetailsService</span> implements <span class=\"token class-name\">UserDetailsService</span> <span class=\"token punctuation\">{</span>\n    private final UserRepository userRepository<span class=\"token punctuation\">;</span>\n\n    public <span class=\"token function\">CustomUserDetailsService</span><span class=\"token punctuation\">(</span>UserRepository userRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        this<span class=\"token punctuation\">.</span>userRepository <span class=\"token operator\">=</span> userRepository<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    @Override\n    @Transactional\n    public UserDetails <span class=\"token function\">loadUserByUsername</span><span class=\"token punctuation\">(</span>final String username<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findOneWithAuthoritiesByUsername</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token function\">createUser</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsernameNotFoundException</span><span class=\"token punctuation\">(</span>username <span class=\"token operator\">+</span> <span class=\"token string\">\" -> 데이터베이스에서 찾을 수 없습니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    private org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>userdetails<span class=\"token punctuation\">.</span>User <span class=\"token function\">createUser</span><span class=\"token punctuation\">(</span>String username<span class=\"token punctuation\">,</span> User user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">isActivated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>username <span class=\"token operator\">+</span> <span class=\"token string\">\" -> 활성화되어 있지 않습니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        List<span class=\"token operator\">&lt;</span>GrantedAuthority<span class=\"token operator\">></span> grantedAuthorities <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthorities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>authority <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleGrantedAuthority</span><span class=\"token punctuation\">(</span>authority<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthorityName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span>Collectors<span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>userdetails<span class=\"token punctuation\">.</span>User</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                user<span class=\"token punctuation\">.</span><span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                grantedAuthorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">UserDetailsService</code>를 <code class=\"language-text\">implements</code>하고 <code class=\"language-text\">UserRepository</code>를 주입받습니다. <code class=\"language-text\">loadUserByUsername</code> 메소드를 오버라이드해서 로그인시에 DB에서 유저정보와 권한정보를 가져오게됩니다.</p>\n<p>해당 정보를 기반으로 해서 <code class=\"language-text\">userdetails.user</code> 객체를 생성해서 리턴합니다.</p>\n<h2 id=\"authcontroller-클래스\" style=\"position:relative;\"><a href=\"#authcontroller-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"authcontroller 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AuthController 클래스</h2>\n<p>로그인 API를 추가하기 위해서 AuthController 클래스를 만들겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"clike\"><pre class=\"language-clike\"><code class=\"language-clike\">@RestController\n@<span class=\"token function\">RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api\"</span><span class=\"token punctuation\">)</span>\npublic class <span class=\"token class-name\">AuthController</span> <span class=\"token punctuation\">{</span>\n    private final TokenProvider tokenProvider<span class=\"token punctuation\">;</span>\n    private final AuthenticationManagerBuilder authenticationManagerBuilder<span class=\"token punctuation\">;</span>\n\n    public <span class=\"token function\">AuthController</span><span class=\"token punctuation\">(</span>TokenProvider tokenProvider<span class=\"token punctuation\">,</span> AuthenticationManagerBuilder authenticationManagerBuilder<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        this<span class=\"token punctuation\">.</span>tokenProvider <span class=\"token operator\">=</span> tokenProvider<span class=\"token punctuation\">;</span>\n        this<span class=\"token punctuation\">.</span>authenticationManagerBuilder <span class=\"token operator\">=</span> authenticationManagerBuilder<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    @<span class=\"token function\">PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/authenticate\"</span><span class=\"token punctuation\">)</span>\n    public ResponseEntity<span class=\"token operator\">&lt;</span>TokenDto<span class=\"token operator\">></span> <span class=\"token function\">authorize</span><span class=\"token punctuation\">(</span>@Valid @RequestBody LoginDto loginDto<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        UsernamePasswordAuthenticationToken authenticationToken <span class=\"token operator\">=</span>\n                <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">(</span>loginDto<span class=\"token punctuation\">.</span><span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> loginDto<span class=\"token punctuation\">.</span><span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        Authentication authentication <span class=\"token operator\">=</span> authenticationManagerBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>authenticationToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        SecurityContextHolder<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAuthentication</span><span class=\"token punctuation\">(</span>authentication<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        String jwt <span class=\"token operator\">=</span> tokenProvider<span class=\"token punctuation\">.</span><span class=\"token function\">createToken</span><span class=\"token punctuation\">(</span>authentication<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        HttpHeaders httpHeaders <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        httpHeaders<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>JwtFilter<span class=\"token punctuation\">.</span>AUTHORIZATION_HEADER<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Bearer \"</span> <span class=\"token operator\">+</span> jwt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TokenDto</span><span class=\"token punctuation\">(</span>jwt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> httpHeaders<span class=\"token punctuation\">,</span> HttpStatus<span class=\"token punctuation\">.</span>OK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이전에 만들었던 <code class=\"language-text\">TokenProvider</code>, <code class=\"language-text\">AuthenticationManagerBuilder</code> 를 주입받습니다.</p>\n<p>로그인 API 경로는 <code class=\"language-text\">/api/authenticate</code> 경로이고 <code class=\"language-text\">POST</code> 요청을 받습니다.</p>\n<h3 id=\"authorize-메소드\" style=\"position:relative;\"><a href=\"#authorize-%EB%A9%94%EC%86%8C%EB%93%9C\" aria-label=\"authorize 메소드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>authorize 메소드</h3>\n<p><code class=\"language-text\">authorize</code> 메소드는 LoginDto의 username, password를 매개변수로 받고 이를 이용해 <code class=\"language-text\">UsernamePasswordAuthenticationToken</code>을 생성합니다.</p>\n<p>authenticationToken을 이용해서 Authentication 객체를 생성하려고 <code class=\"language-text\">authenticate</code> 메소드가 실행이될 때 <code class=\"language-text\">CustomUserDetailsService</code> 클래스의 <code class=\"language-text\">loadUserByUsername</code> 메소드가 실행됩니다.</p>\n<p>이 결과값을 이용해서 Authenticaion 객체를 생성하고 이를 SecurityContext 에 저장하고 Authenticaion 객체를 <code class=\"language-text\">createToken</code> 메소드를 통해서 JWT Token 을 생성합니다.</p>\n<p>JWT Token 을 Response Header에 넣어주고 TokenDto를 이용해서 Response Body에도 넣어서 리턴하게 됩니다.</p>\n<h1 id=\"4-로그인-api-테스트\" style=\"position:relative;\"><a href=\"#4-%EB%A1%9C%EA%B7%B8%EC%9D%B8-api-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"4 로그인 api 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 로그인 API 테스트</h1>\n<p>자 이제 로그인 API 를 포스트맨으로 테스트해보겠습니다.</p>\n<h2 id=\"로그인-요청\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%9A%94%EC%B2%AD\" aria-label=\"로그인 요청 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그인 요청</h2>\n<p> <a href=\"http://localhost:8080/api/authenticate\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:8080/api/authenticate</a> 경로로 아래와 같이 <code class=\"language-text\">POST</code> 요청을 보냅니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6c422b50c5b4684d01384f80763463c6/0d98f/4-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.513513513513516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDElEQVQoz5VQy26EMAzk/z+vp0o9VLstoQshAQJ5kkzttLCV2kM30shjZxyP0yilYK3Ftm1YlgXTNFVwXWt95saYU2ft9oPfI6MRQtTCuq4YxxFd151oRUsQEMSllLWBdb+xnbzx3mPf9yp2zqGUghACbHDIKLBmgYkrEmkOJ3wfY0RKCZ56vLM4TsPrbPQyr8dr8mpaTxiJ813/dsEke6xKft/p+jXMh2GgIRatCvAxVzNNoEnWeWRKMk3giJKra3bAzvad8hTvNQJzdlljylWTc6aVY0KvDdqLwPvzC67XDzy9StyUwf9PqagOXYiYV4tZTdC3gdae0Ur6YBe+pKU8hOZo+nPug48xPgH79G4/Ya6hPgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/6c422b50c5b4684d01384f80763463c6/fcda8/4-1.png\"\n        srcset=\"/static/6c422b50c5b4684d01384f80763463c6/12f09/4-1.png 148w,\n/static/6c422b50c5b4684d01384f80763463c6/e4a3f/4-1.png 295w,\n/static/6c422b50c5b4684d01384f80763463c6/fcda8/4-1.png 590w,\n/static/6c422b50c5b4684d01384f80763463c6/efc66/4-1.png 885w,\n/static/6c422b50c5b4684d01384f80763463c6/c83ae/4-1.png 1180w,\n/static/6c422b50c5b4684d01384f80763463c6/0d98f/4-1.png 1276w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>admin 계정 정보는 data.sql의 insert문이 서버가 시작될때 자동실행되어 DB에 저장된 상태입니다.</p>\n<ul>\n<li>\n<p>405 HTTP 상태 코드가 발생하면?</p>\n<ul>\n<li>Server Log</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">2022</span><span class=\"token number\">-01</span><span class=\"token number\">-12</span> <span class=\"token number\">18</span><span class=\"token operator\">:</span><span class=\"token number\">35</span><span class=\"token operator\">:</span><span class=\"token number\">18.364</span> DEBUG <span class=\"token number\">5197</span> --- <span class=\"token punctuation\">[</span>nio<span class=\"token number\">-8080</span>-exec<span class=\"token number\">-1</span><span class=\"token punctuation\">]</span> com.example.jwttutorial.jwt.JwtFilter    <span class=\"token operator\">:</span> 유효한 JWT 토큰이 없습니다<span class=\"token punctuation\">,</span> uri<span class=\"token operator\">:</span> /api/authenticate\n<span class=\"token number\">2022</span><span class=\"token number\">-01</span><span class=\"token number\">-12</span> <span class=\"token number\">18</span><span class=\"token operator\">:</span><span class=\"token number\">35</span><span class=\"token operator\">:</span><span class=\"token number\">18.373</span>  WARN <span class=\"token number\">5197</span> --- <span class=\"token punctuation\">[</span>nio<span class=\"token number\">-8080</span>-exec<span class=\"token number\">-1</span><span class=\"token punctuation\">]</span> .w.s.m.s.DefaultHandlerExceptionResolver <span class=\"token operator\">:</span> Resolved <span class=\"token punctuation\">[</span>org.springframework.web.HttpMediaTypeNotSupportedException<span class=\"token operator\">:</span> Content type 'text/plain;charset=UTF<span class=\"token number\">-8</span>' not supported<span class=\"token punctuation\">]</span>\n<span class=\"token number\">2022</span><span class=\"token number\">-01</span><span class=\"token number\">-12</span> <span class=\"token number\">18</span><span class=\"token operator\">:</span><span class=\"token number\">35</span><span class=\"token operator\">:</span><span class=\"token number\">18.374</span> DEBUG <span class=\"token number\">5197</span> --- <span class=\"token punctuation\">[</span>nio<span class=\"token number\">-8080</span>-exec<span class=\"token number\">-1</span><span class=\"token punctuation\">]</span> com.example.jwttutorial.jwt.JwtFilter    <span class=\"token operator\">:</span> 유효한 JWT 토큰이 없습니다<span class=\"token punctuation\">,</span> uri<span class=\"token operator\">:</span> /error</code></pre></div>\n<ul>\n<li>Response</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"timestamp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2022-01-12T09:33:18.957+00:00\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token number\">415</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"error\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Unsupported Media Type\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/api/authenticate\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이 응답이 반환되면 POST 요청을 보낼때 <code class=\"language-text\">JSON</code> 형식으로 보내시면됩니다.</p>\n</li>\n</ul>\n<h2 id=\"정상-응답\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EC%83%81-%EC%9D%91%EB%8B%B5\" aria-label=\"정상 응답 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정상 응답</h2>\n<p>정상적으로 요청이 응답된다면 서버에선 해당 sql문 query 내용이 로그로 나타납니다</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">Hibernate<span class=\"token operator\">:</span> \n    select\n        user0_.user_id as user_id1_1_0_<span class=\"token punctuation\">,</span>\n        authority2_.authority_name as authorit1_0_1_<span class=\"token punctuation\">,</span>\n        user0_.activated as activate2_1_0_<span class=\"token punctuation\">,</span>\n        user0_.nickname as nickname3_1_0_<span class=\"token punctuation\">,</span>\n        user0_.password as password4_1_0_<span class=\"token punctuation\">,</span>\n        user0_.username as username5_1_0_<span class=\"token punctuation\">,</span>\n        authoritie1_.user_id as user_id1_2_0__<span class=\"token punctuation\">,</span>\n        authoritie1_.authority_name as authorit2_2_0__ \n    from\n        user user0_ \n    left outer join\n        user_authority authoritie1_ \n            on user0_.user_id=authoritie1_.user_id \n    left outer join\n        authority authority2_ \n            on authoritie1_.authority_name=authority2_.authority_name \n    where\n        user0_.username=?</code></pre></div>\n<p>그리고 Repsonse 내용으로 아래와 같이 Token이 정상적으로 리턴됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImF1dGgiOiJST0xFX0FETUlOLFJPTEVfVVNFUiIsImV4cCI6MTY0MjA2NjU2NH0.QLtuqh874mipMl-h0cO6p4Jf430RGf2uBArr5nWcnmnvG6YqVo0qFXGxEwbPHD9u7J4Zl1GIL0YuWQTXWdUYHA\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 DTO 클래스, Repository, 로그인 API의 개발이 완료되었습니다. </p>\n<p>디음 편에서는 회원가입 API를 만들고 회원가입한 유저와 admin 관리자의 권한 검증을 구성하겠습니다.</p>\n<ul>\n<li>Postman의 유용한 기능</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/146797c9420098b28cce64883547c52a/7321b/4-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.243243243243242%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAyUlEQVQY001Qa4/CIBDs//+Jpzbay53G2FLL8lxgHPgkycBC5rHL5L2HFoVzjhCklIgMJw42CEotEL5bdUg5QUQGOj9n8qzFy65ImiGspxgjqipCiLDiSVJkjRRZiGcAReId3j2YPKWwh3azUgrS20DMcwSHEDAFGqyPHZd5w+my4flncH9sWOYdy8+B38VhPnvcrgf+7wav1eM4BPtuhmEDF7daa68wtdbYLt1jZnqB9g5j4wneidwGaiUvcZKo40v6ZN2wG33jAxPvNnL/N8GgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/146797c9420098b28cce64883547c52a/fcda8/4-2.png\"\n        srcset=\"/static/146797c9420098b28cce64883547c52a/12f09/4-2.png 148w,\n/static/146797c9420098b28cce64883547c52a/e4a3f/4-2.png 295w,\n/static/146797c9420098b28cce64883547c52a/fcda8/4-2.png 590w,\n/static/146797c9420098b28cce64883547c52a/efc66/4-2.png 885w,\n/static/146797c9420098b28cce64883547c52a/c83ae/4-2.png 1180w,\n/static/146797c9420098b28cce64883547c52a/7321b/4-2.png 1184w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위와 같이 Tests 탭에서 Response의 데이터를 전역변수에 저장해서 다른 Request에서도 사용할 수 있습니다.</p>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<p><a href=\"https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Spring Docs - JpaRepository</a></p>","excerpt":"1. DTO 클래스 생성 LoginDto 클래스 외부와의 통신에 사용할 DTO 패키지 및 클래스를 생성합니다. Lombok 어노테이션(Get, Set 등)이 추가되었고 @Valid 관련 어노테이션을 추가했습니다. 로그인 할 이용자의 아이디, 비밀번호…","tableOfContents":"<ul>\n<li>\n<p><a href=\"/springboot-jwt-tutorial4/#1-dto-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%83%9D%EC%84%B1\">1. DTO 클래스 생성</a></p>\n<ul>\n<li><a href=\"/springboot-jwt-tutorial4/#logindto-%ED%81%B4%EB%9E%98%EC%8A%A4\">LoginDto 클래스</a></li>\n<li><a href=\"/springboot-jwt-tutorial4/#tokendto-%ED%81%B4%EB%9E%98%EC%8A%A4\">TokenDto 클래스</a></li>\n<li><a href=\"/springboot-jwt-tutorial4/#userdto-%ED%81%B4%EB%9E%98%EC%8A%A4\">UserDto 클래스</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/springboot-jwt-tutorial4/#2-repository-%EA%B4%80%EB%A0%A8-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\">2. Repository 관련 코드 작성</a></p>\n<ul>\n<li><a href=\"/springboot-jwt-tutorial4/#userrepository-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4\">UserRepository 인터페이스</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/springboot-jwt-tutorial4/#3-%EB%A1%9C%EA%B7%B8%EC%9D%B8-api-%EA%B4%80%EB%A0%A8-%EB%A1%9C%EC%A7%81-%EC%83%9D%EC%84%B1\">3. 로그인 API, 관련 로직 생성</a></p>\n<ul>\n<li><a href=\"/springboot-jwt-tutorial4/#customuserdetailsservice-%ED%81%B4%EB%9E%98%EC%8A%A4\">CustomUserDetailsService 클래스</a></li>\n<li>\n<p><a href=\"/springboot-jwt-tutorial4/#authcontroller-%ED%81%B4%EB%9E%98%EC%8A%A4\">AuthController 클래스</a></p>\n<ul>\n<li><a href=\"/springboot-jwt-tutorial4/#authorize-%EB%A9%94%EC%86%8C%EB%93%9C\">authorize 메소드</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"/springboot-jwt-tutorial4/#4-%EB%A1%9C%EA%B7%B8%EC%9D%B8-api-%ED%85%8C%EC%8A%A4%ED%8A%B8\">4. 로그인 API 테스트</a></p>\n<ul>\n<li><a href=\"/springboot-jwt-tutorial4/#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%9A%94%EC%B2%AD\">로그인 요청</a></li>\n<li><a href=\"/springboot-jwt-tutorial4/#%EC%A0%95%EC%83%81-%EC%9D%91%EB%8B%B5\">정상 응답</a></li>\n</ul>\n</li>\n<li><a href=\"/springboot-jwt-tutorial4/#reference\">Reference</a></li>\n</ul>","fields":{"slug":"/springboot-jwt-tutorial4/"},"frontmatter":{"title":"SpringBoot JWT 튜토리얼 - 4장 DTO,Repository,로그인 구현","date":"Jan 13, 2022","tags":["SpringBoot","JWT","튜토리얼"],"keywords":["스프링","스프링부트","SpringBoot","JWT","튜토리얼","Tutorial","Login","로그인"],"update":"Jan 01, 0001"}}},"pageContext":{"slug":"/springboot-jwt-tutorial4/","series":[],"lastmod":"2022-01-13"}},"staticQueryHashes":["2027115977","694178885"]}